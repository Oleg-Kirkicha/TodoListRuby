<div class="top-bar">
  <% if user_signed_in? %>
    <span>Hello, <%= current_user.email %></span>
    <%= button_to "Logout", destroy_user_session_path, method: :delete, class: "btn" %>
  <% else %>
    <%= link_to 'login', new_user_session_path, class: "btn" %>
    <%= link_to 'new user', new_user_registration_path, class: "btn" %>
  <% end %>
</div>

<div class="page-container">
  <h1>Todolist</h1>

  <%= form_with url: todos_path, method: :post, local: true do %>
    <input id="todo_input" type="text" name="text" placeholder="What needs to be done?" />
  <% end %>

  <div id="todo_list">
    <% @todos.each do |todo| %>
      <div class="todo-item <%= 'completed' if todo.done %>">
        <%= button_to '', toggle_todo_path(todo), method: :patch, class: "checkbox" %>
        <p><%= todo.text %></p>
        <%= button_to 'Delete', todo_path(todo), method: :delete, class: "delete" %>
      </div>
    <% end %>
  </div>
</div>